<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
<meta property="og:type" content="website">
<meta property="og:title" content="牛牛的小窝">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="牛牛的小窝">
<meta property="og:description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="niuniu">
<meta property="article:tag" content="Java, Mysql, Linux">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>牛牛的小窝</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">牛牛的小窝</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">不奢望岁月静好 只希望点滴积累</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/java_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6---Java%E7%B1%BB%E5%9E%8B%E5%BC%95%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/java_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6---Java%E7%B1%BB%E5%9E%8B%E5%BC%95%E7%94%A8/" class="post-title-link" itemprop="url">垃圾回收---Java类型引用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Java垃圾回收的依据是：是否还有引用.</p>
<h5 id="什么是引用呢-？"><a href="#什么是引用呢-？" class="headerlink" title="什么是引用呢 ？"></a>什么是引用呢 ？</h5><p>jdk1.2 之前的定义是：</p>
<blockquote>
<p>若reference类型的数据中存储的数值代表一块内存的起始地址、则这块内存代表一个引用</p>
</blockquote>
<p>jdk1.2 之后进行了扩充：</p>
<blockquote>
<p>分为<code>强引用</code>、<code>软引用</code>、<code>若引用</code>、<code>虚引用</code>.</p>
</blockquote>
<p>如何定义 ？<br><code>强引用 (strong reference)</code>: 程序代码中普遍存在的、类似 <code>Object obj = new Object()</code> 这类的引用， 只要引用还在、永远不会被回收掉的对象</p>
<p><code>软引用 (soft reference)</code>：描述一些还有用、但不是必须的对象. 软引用关联的对象、在系统将要发生<code>OOM</code>前会对这些对象进行一次回收、若回收能够产生足够的空间、则不会发生<code>OOM</code>， 回收完成依然没有足够的空间才会抛出<code>OOM</code>异常, <code>JDK1.2</code>之后、系统提供了<code>SoftReference</code>来实现软引用</p>
<p><code>弱引用 (weak reference)</code>: 也是非必须对象、比软引用的引用更弱一些、被弱引用关联的对象只能生存到下次gc发生之前、当垃圾收集器工作时、无论当前内存是否足够、都会回收掉只被弱引用关联的对象<br><code>JDK1.2</code>之后提供了<code>WeakReference类</code>来实现弱引用</p>
<p><code>虚引用 (Phantom reference)</code>: 一个对象是否有虚引用的存在、完全不影响其生存时间、也无法通过虚引用来取得一个对象的实例、设置虚引用的唯一目的就是能在整个对象进行垃圾收集时收到一个系统通知</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/java_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6---%E4%B8%83%E7%A7%8D%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/java_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6---%E4%B8%83%E7%A7%8D%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">垃圾回收---七种垃圾收集器简介</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>####基本概念：</p>
<p>新生代：大多数对象在eden区生产、很多对象的什么周期很短、每次新生代的垃圾回收(<code>minor gc</code>)后只有少量对象存活<br>      所以选用的是复制算法、只需要少量的复制成本就可以完成回收<br>      <code>young generation</code> 一般又分为 <code>eden</code>区 和 <code>survivor</code> 区(一般<code>2</code>个<code>survivor</code>区)<br>      大部分对象在eden区生产、eden区满时、还存活的对象被复制到两个survivor区中的一个、这个survivor区满时<br>      此区存活切不满足<code>晋升</code>条件的对象将被复制到另一个survivor区(对象每经历一次<code>minor gc</code>， <code>age</code> + 1，<br>      到达年龄阈值后、被放到老年代<code>old generation</code>, 在<code>Serial</code>和<code>ParNew GC</code>)两种垃圾回收器中、<code>晋升年龄阈值</code><br>      由参数 <code>MaxTenuringThreshould</code>设定、默认15</p>
<p>老年代：<code>old generation</code>在新生代中经历了n次垃圾回收后仍然存活的对象、会被放到老年代、改区域对象存活的几率比较高<br>      老年代的垃圾回收(<code>Major gc</code>)通常使用 <code>标记-清理</code>或者<code>标记-整理</code>算法，整堆的回收(包括young和old)称为<code>full gc</code><br>      (HotSpot VM)中、除了<code>CMS</code>之外、其它能收集老年代的gc都会同时回收整个GC堆、包括新生代</p>
<p>永久代: <code>perm generation</code>主要存放元数据、eg. <code>class</code>, <code>method</code>的元信息、与垃圾回收要回收的关系不大、相对新生代<br>      和老年代、改区域对垃圾回收的影响较小</p>
<h4 id="常见的垃圾回收器"><a href="#常见的垃圾回收器" class="headerlink" title="常见的垃圾回收器"></a>常见的垃圾回收器</h4><h5 id="新生代垃圾收集器"><a href="#新生代垃圾收集器" class="headerlink" title="新生代垃圾收集器"></a>新生代垃圾收集器</h5><ol>
<li><code>Serial</code>：串行收集器、采用复制算法、jdk1.3之前的唯一选择、单线程、进行垃圾收集时、会STW<br>   <code>jdk1.3</code>之后又很多优秀收集器、单由于它 对于限定单个cpi的环境来说、没有线程交互的开销、简单高效<br>   至今仍然是 hotspot 虚拟机运行在client模式下的默认新生代收集器</li>
</ol>
<p><img src="https://upload-images.jianshu.io/upload_images/14027542-ffea12d750747d02.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="serial &amp; serial old.png"></p>
<ol start="2">
<li><code>ParNew</code>：<code>Serial</code>的多线程版本、除了使用多线程进行垃圾收集外、其余行为包括<code>Serial收集器可用的控制参数</code>，<br>  <code>收集算法</code>, <code>stw</code>, <code>对象分配规则</code>, <code>回收策略</code>等 与<code>Serial</code>收集器的完全相同、两者公用了很多代码<br>  ParNew收集器除了使用多线程收集外、其它与Serial收集器并无太多创新之处、<code>但</code>是在Server模式下的首选<br>  一个与性能无关的原因:除Serial外、它是唯一能够和<code>CMS</code>收集器(<code>Concurrent Mark Sweep</code>)配合工作的<br>  <code>ParNew</code> 收集器在 <code>单CPU</code> 的环境中、不会有比<code>Serial</code>收集器更好的效果、甚至由于存在线程交互的开销<br>  在两个CPU的环境中都不能百分之百的保证超越、在多CPU的环境下、随着<code>CPU的增加</code>、在GC时、<br>  对资源的有效利用是有好处的、默认开启的<code>收集线程</code>数和<code>CPU的数量</code>相同, 在CPU非常多的时候、可以通过<br>  <code>-XX:ParallerGCThreads</code>参数设置</li>
</ol>
<p><img src="https://upload-images.jianshu.io/upload_images/14027542-7b2a44d4cfdc7d12.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ParNew &amp; Serial Old.png"></p>
<ol start="3">
<li><code>Parallel Scavenge</code>: 收集器是<code>并行</code>的<code>多线程</code> <code>新生代</code>收集器, 使用<code>复制</code>算法<br>  它与其它收集器的关注点不同、CMS等收集器的关注点是：尽可能缩短垃圾收集时用户线程的停顿时间<br>  而Parallel Scavenge的关注点是：达到一个可控制的吞吐量<br>  <code>停顿短</code>适合需要与用户交互的程序、良好的响应可以提高用户体验<br>  <code>高吞吐量</code>则可以高效的利用CPU时间、尽快的完成任务、适合在后台运算无需太多交互的任务<br>  <code>Parallel Scavenge</code>收集器提供了一个开关参数 <code>-XX:UseAdaptiveSizePolicy</code>指定后可以不用人工指定<br>  新生代大小(-Xmn)、Eden和Survivor区的比率(-XX:SurvivorRatio)、<br>  晋升老年代年龄(-XX:PretenureSizeThreshold)等参数细节了、虚拟机会根据当前系统的运行情况、动态调整参数<br>  这种方式称为：<code>GC的自适应调节策略</code><br>  <code>注意</code> Parallel Scavenge收集器无法和CMS配合使用、在<code>JDK1.6</code>推出<code>Parallel Old</code>之前、<br>  只能和<code>Serail Old</code>收集器一起使用<br>·<br> <img src="https://upload-images.jianshu.io/upload_images/14027542-601ead2dd3099f9a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paralle Scavenge.png"></li>
</ol>
<h5 id="老年代收集器"><a href="#老年代收集器" class="headerlink" title="老年代收集器"></a>老年代收集器</h5><ol>
<li><p><code>Serial Old</code>是<code>Serial</code>收集器的老年代版本、<code>单线程</code>, 使用<code>标记-整理</code>(<code>Mark-Compact</code>)算法<br>     1) JDK1.5及之前的版本(Parallel Old)诞生之前、与 <code>Parallel Scavenge</code>配合使用<br>     2) 作为CMS收集器的后备预案、在并发手机发生 <code>Concurrent Mode Failuer</code>时使用</p>
</li>
<li><p><code>Parallel Old</code>是<code>Parallel Scavenge</code>的老年代版本, 使用<code>多线程</code>和<code>标记-整理</code>算法, <code>JDK1.6</code>的版本才开始提供<br>     在它出现之后<code>吞吐量优先</code>才有了名副其实的应用组合、在注重吞吐量和cpu敏感的场合、都可以优先考虑<br>     <code>Parallel Scavenge</code>和<code>Parallel Old</code>组合     </p>
</li>
<li><p><code>CMS</code>:<code>Concurrent Mark Sweep</code>收集器是一种以最短回收停顿时间为目标的收集器、使用<code>标记-清除</code>算法<br>   基本流程：</p>
<ol>
<li><code>初始标记</code>:<code>CMS Initial mark</code>仅标记<code>GC Roots</code>能直接关联的对象、速度很快, 会 STW</li>
<li><code>并发标记</code>:<code>CMS Concurrent mark</code>是<code>GC Roots Tracing</code>的过程、耗时最长、但不会STW</li>
<li><code>重新标记</code>:<code>CMS remark</code>为了修正并发标记期间用户程序继续访问导致标记产生变动的对象的标记<br> 时间会比初始标记长、单远小于并发标记, 需要 STW</li>
<li><code>并发清除</code>: <code>CMS concurrent sweep</code><br>   缺点：1) CPU资源敏感、在并发阶段不会导致停顿、单会占用CPU资源、导致应用程序变慢、总的吞吐量降低<br> 默认启动的回收线程数是<code>(CPU数+3)/4</code>，即不少于25%的CPU资源、且随着cpu的增加而下降<br> 但、CPU资源不足时、cms对用户程序的影响可能变大、若CPU的负载本身就很高、还要分出一般运算能力<br> 去执行垃圾收集、系统也会有明显的卡顿<br>   2)无法处理浮动垃圾<code>Floating Garbage</code>可能出现<code>Concurrent Mode Failure</code>而导致Full gc<br>  由于CMS并发清理阶段用户线程还在运行着，伴随程序运行自然就还会有新的垃圾不断产生。<br>  出现在标记过程之后，无法再当次收集中处理掉它们，只能待下一次GC时再清理掉。这一部分垃圾就被称为<code>浮动垃圾</code><ol start="3">
<li>产生空间碎片: 空间碎片过多时、会导致老年代空间有剩余、单无法找到足够大连续空间来分配当前对象</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><img src="https://upload-images.jianshu.io/upload_images/14027542-a48e748a7206f8ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cms.png"></p>
<ol start="4">
<li>G1 收集器<br>   <code>G1</code>: <code>Garbage First</code>收集器是新的、面向Server应用、HotSpot团队赋予它的使命是：在将来替换掉CMS收集器<br>     1) 并发与并行：G1可充分利用多CPU、多核条件下的硬件优势、使用多个CPU来缩短STW的停顿时间、<br>        部分收集器原本需要停顿Java线程执行的GC动作、G1可以通过并发的方式让Java程序继续执行<br>     2) 分代收集: G1可以不需要其它收集器的配合自己管理整个GC堆、可以采用不同方式去处理新创建的对象和<br>        已存活一段时间、经过了n次GC的old对象来获取更好的收集效果<br>     3) 空间整合: G1从整体来看是基于<code>标记-整理</code>实现的, 从局部(两个Region间)来看是基于复制的<br>        所以、在G1运行期间不会产生大量的内存空间碎片、避免提前触发full gc<br>     4) 可预测的停顿: G1和CMS的共同关注点是降级停顿、但G1除了降低停顿之外、还能建立可预测的停顿时间模型<br>        让使用者明确指定在一个长度为M ms的时间片段内、消耗在GC上的时间不得超过N ms、<br>        这几乎是实时Java(RTSJ)的垃圾收集器的特征了</li>
</ol>
<p>G1收集器：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5a95ce2bbb36">https://www.jianshu.com/p/5a95ce2bbb36</a></p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><ul>
<li><a target="_blank" rel="noopener" href="https://crowhawk.github.io/2017/08/15/jvm_3/">https://crowhawk.github.io/2017/08/15/jvm_3/</a></li>
<li><a target="_blank" rel="noopener" href="https://tech.meituan.com/2017/12/29/jvm-optimize.html">https://tech.meituan.com/2017/12/29/jvm-optimize.html</a><br>等众多网络文章</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/java_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6---%E5%B0%8F%E7%96%91%E9%97%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/java_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6---%E5%B0%8F%E7%96%91%E9%97%AE/" class="post-title-link" itemprop="url">垃圾回收---小疑问</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>看懂了gc日志、可能心中还有小小的疑惑？</p>
<h5 id="为什么需要垃圾回收"><a href="#为什么需要垃圾回收" class="headerlink" title="为什么需要垃圾回收"></a>为什么需要垃圾回收</h5><blockquote>
<p>在内存的动态分配和回收机制十分成熟的情况下、仍然没办法避免排查各种内存溢出、内存泄露的问题, 当垃圾收集称为系统达到更高并发量的瓶颈时、就需要了解gc的细节、对gc进行必要的监控和调节</p>
</blockquote>
<blockquote>
<p>程序计数器、虚拟机栈、本地方法栈 随线程运行结束而消亡、这几个区域的内存分配和回收具有确定性、不需要过多的考虑内存回收问题<br>而Java堆和方法区、则在运行时才知道要创建的对象、内存的分配是动态的、垃圾回收主要关注的是这部分的内存</p>
</blockquote>
<h5 id="如何判断对象已死？"><a href="#如何判断对象已死？" class="headerlink" title="如何判断对象已死？"></a>如何判断对象已死？</h5><blockquote>
<ol>
<li>引用计数法<br>给对象添加一个引用计数器、当有新的引用时、计数器的值+1， 引用失效是、计数器的值-1， 计数器的值为0的对象就是不再有引用的对象<br>这种方式的判断效率很高、实现也比较简单、但是不太好判断 循环引用的问题<br>A-&gt;B, B-&gt;A</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>可达性分析<br>通过 <code>GC Roots</code> 作为分析的起点、从这些节点向下搜索、若一个对象通过任意引用链不可达、则会被判断为<code>可回收对象</code></li>
</ol>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">可作为 <span class="code">`gc root`</span> 的对象：</span><br><span class="line"><span class="bullet">1.</span> 虚拟机桟中引用的对象</span><br><span class="line"><span class="bullet">2.</span> 方法区中静态属性引用的对象</span><br><span class="line"><span class="bullet">3.</span> 方法区中常量引用的对象</span><br><span class="line"><span class="bullet">4.</span> 本地方法桟中JNI(Native方法)引用的对象</span><br></pre></td></tr></table></figure>

<h5 id="为什么gc的过程要stw-？"><a href="#为什么gc的过程要stw-？" class="headerlink" title="为什么gc的过程要stw ？"></a>为什么gc的过程要stw ？</h5><blockquote>
<p>为了避免分析过程中对象的引用关系还在不断的发生变化、导致分析结果的准确性无法保证<br>系统停顿下来后如果得知对象引用关系呢 ？<br>在hotspot的实现中、有一个OopMap的数据结构、在类加载的时候， 它就把对象内什么偏移量位置上是什么类型的数据计算出来、在jit编译的过程中也会在特定的位置记录桟和寄存器哪些位置是引用、这样gc扫描时就可以直接得到了<br>但是、为什么是特定位置 ？<br>如果每条指令都生成对应OopMap、会需要大量的额外空间、所以只是在特定位置(安全点<code>safepoint</code>)记录这些信息<br><code>notice</code> : 设置标记等待线程运行到安全点再gc解决了大部分问题、但如果线程是<code>sleep</code>或者<code>block</code>状态呢 ？线程无法响应jvm的中断请求、运行到安全点去中断挂起、jvm也不可能得到线程被重新分配CPU时间、so、有了<code>安全区域</code>-<code>safe region</code>来解决<br><code>safe region</code>: 在一个代码片段之内、引用关系不会发生变化、在这个区域内的任意位置进行gc都是安全的，线程在进入安全区域的时候、会设置自己进入安全区域的标记、jvm在gc时、会忽略这类线程<br>在线程离开安全区域时会检测系统是否已经完成了gc、ok则可以继续运行、否则需要等待可以离开安全点的信号</p>
</blockquote>
<h5 id="晋升为老年代的判断？"><a href="#晋升为老年代的判断？" class="headerlink" title="晋升为老年代的判断？"></a>晋升为老年代的判断？</h5><blockquote>
<ol>
<li>对象优先在Eden区分配、若Eden区无足够的空间、虚拟机会发起一次Minor GC， 经过一次Minor gc、<code>age</code>会<code>+1</code>、达到指定age(<code>-XX:MaxTenuringThreshold指定</code>)时、对象会进入老年代</li>
<li>Minor gc时、无法放入 <code>survivor</code> 区的对象、会通过<code>分配担保机制</code>提前转移到<code>old generation</code></li>
<li>大对象直接进入老年代, 为避免提前触发gc  大于 <code>-XX:PreTenureThreshold</code>指定值得对象会提前进入直接在老年代分配</li>
<li>若survivor区 相同年龄的所有对象的大小的总和&gt;survivor区的一半、则 age &gt;&#x3D; 该age值得对象可以直接进入老年代、无需等到 <code>-XX:MaxTenuringThreshold</code> 指定年龄值</li>
</ol>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/linux%E4%BD%BF%E7%94%A8_README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/linux%E4%BD%BF%E7%94%A8_README/" class="post-title-link" itemprop="url">README</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E4%BD%BF%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">Linux使用</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="let’s-start"><a href="#let’s-start" class="headerlink" title="let’s start"></a>let’s start</h4><p>知识的海洋是浩瀚的、有太多的好奇与未知。。。。<br>一直想要探索linux系统到底是如何运行而不得其法、偶然间遇到极课时间的一个linux系统优化的专栏、还不错、<br>写一下自己的收获吧、算是由表及里也好~</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/linux%E4%BD%BF%E7%94%A8_linux%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7---pidstat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/linux%E4%BD%BF%E7%94%A8_linux%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7---pidstat/" class="post-title-link" itemprop="url">linux性能监控---pidstat</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E4%BD%BF%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">Linux使用</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>cpu使用率监控<br>pidstat -t {pid}  1 3 -u 每隔1s输出1次、共输出3次系统状况<br>pidstat -t {pid}  1 3 -u -t 同时输出线程使用情况</p>
</li>
<li><p>io监控<br>pidstat -t {pid}  1 3 -d -t 查看线程io信息</p>
</li>
<li><p>内存使用监控<br>pidstat -t {pid}  1 3 -m -t 查看线程内存使用</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/linux%E4%BD%BF%E7%94%A8_linux%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7---vmstat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/linux%E4%BD%BF%E7%94%A8_linux%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7---vmstat/" class="post-title-link" itemprop="url">linux性能监控---vmstat</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E4%BD%BF%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">Linux使用</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://upload-images.jianshu.io/upload_images/14027542-63558050c585c684.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>各列含义如下：<br><code>procs</code>:<br><code>r</code> 等待运行的进程数<br> <code>b</code> 可中断休眠的进程数</p>
<p><code>memory</code>: kb<br><code>swpd</code> 虚拟内存的使用项目<br><code>free</code> 空闲的内存<br><code>buff</code> 被用来作为缓存的内存数</p>
<p><code>swap</code><br><code>si</code> 从磁盘交换到内存的交换页数量、<br><code>so</code> 从内存交换到磁盘的交换页数量、</p>
<p><code>io</code><br><code>bi</code> 发送到块设备的块数<br><code>bo</code> 从块设备接收到的块数</p>
<p><code>system</code><br><code>in</code> 每秒的中断数包括时钟中断<br><code>cs</code> 每秒的上下文切换数</p>
<p><code>cpu</code><br><code>us</code> 用户cpu使用时间<br><code>sy</code> 系统cpu使用时间<br><code>id</code> 空闲时间</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/java_Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0%E5%9F%BA%E7%A1%80(%E4%BA%8C)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/java_Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0%E5%9F%BA%E7%A1%80(%E4%BA%8C)/" class="post-title-link" itemprop="url">Java多线程实现基础(二)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Java内存模型"><a href="#Java内存模型" class="headerlink" title="Java内存模型"></a>Java内存模型</h4><h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 线程通信</span><br><span class="line">   线程之间以何种方式进行消息传递</span><br><span class="line">   共享内存 &amp; 消息传递</span><br><span class="line">   </span><br><span class="line"><span class="number">2</span>. 线程同步</span><br><span class="line">   程序间用于控制不同线程间操作发生相对顺序的机制</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">java是共享内存模型】采用的是隐式通信、显式修改</span></span><br><span class="line"><span class="keyword"></span>   </span><br><span class="line">   <span class="keyword">jvm定义了线程和主内存(Main </span>Memory)之间的关系:</span><br><span class="line">   <span class="number">1</span>) 线程之间的共享变量存储在主内存中</span><br><span class="line">   <span class="number">2</span>) 线程私有变量存储在私有本地内存 Local Memory中、</span><br><span class="line">      本地内存是<span class="keyword">jvm的一个抽象概念、并非真实存在、涵盖缓存、缓冲区、寄存器及其它硬件及编译器优化</span></span><br><span class="line"><span class="keyword"></span>   <span class="keyword">Java同步原语(synchronize </span>volatile  final)</span><br></pre></td></tr></table></figure>

<h3 id="指令重排"><a href="#指令重排" class="headerlink" title="指令重排"></a>指令重排</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 编译器重排</span><br><span class="line">   在不改变单线程语义的条件下、编译器可以重排指令的执行顺序</span><br><span class="line"><span class="bullet">2.</span> 指令重排 </span><br><span class="line">   现代cpu采用了指令级并行技术、可以同时执行多条指令、若无数据依赖、</span><br><span class="line">   处理器可以改变机器指令的执行顺序</span><br><span class="line"><span class="bullet">3.</span> 内存系统的重排</span><br><span class="line">   由于处理器采用缓存和读写缓冲区、使得加载和存储操作看上去是乱序的、</span><br><span class="line">   可能在乱序执行</span><br></pre></td></tr></table></figure>

<h4 id="jvm-指令执行"><a href="#jvm-指令执行" class="headerlink" title="jvm 指令执行"></a>jvm 指令执行</h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">未使用同步的程序在<span class="keyword">jvm</span>中的执行基本无序、</span><br><span class="line"><span class="number">1</span>. <span class="keyword">jvm</span>不保证单线程内的操作会按照程序代码顺序执行、临界区指令重排</span><br><span class="line"><span class="number">2</span>. <span class="keyword">jvm</span>不保证所有线程看到的执行顺序一致</span><br><span class="line"><span class="number">3</span>. <span class="keyword">jvm</span>不保证<span class="number">64</span>位的long、double类型写操作具有原子性</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/linux%E4%BD%BF%E7%94%A8_lsof---%E4%B8%80%E5%88%87%E7%9A%86%E6%96%87%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/linux%E4%BD%BF%E7%94%A8_lsof---%E4%B8%80%E5%88%87%E7%9A%86%E6%96%87%E4%BB%B6/" class="post-title-link" itemprop="url">lsof---一切皆文件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E4%BD%BF%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">Linux使用</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>lsof(list open files) 查看当前系统文件、Linux下任何事物都以文件的形式存在、通过文件不仅可以访问常规数据库、还可以访问网络连接(tcp、udp等)和硬件</p>
</blockquote>
<p><strong>lsof 打开文件可以是：</strong></p>
<ul>
<li>普通文件 </li>
<li>目录</li>
<li>网络文件系统的文件</li>
<li>字符或设备文件</li>
<li>共享库</li>
<li>管道、命名管道</li>
<li>符号连接</li>
<li>网络文件 (eg. NFS file、网络socket、unix 域名socket等)</li>
<li>其它类型的文件</li>
</ul>
<p><strong>命令参数</strong></p>
<blockquote>
<p>-a 列出打开文件存在的进程<br>-c&lt;进程名&gt;</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/linux%E4%BD%BF%E7%94%A8_tcpdump%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/linux%E4%BD%BF%E7%94%A8_tcpdump%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">tcpdump基本使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E4%BD%BF%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">Linux使用</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>选项</strong></p>
<ul>
<li><code>-i any</code> 监听所有的网卡接口、用来查看是否有网络流量</li>
<li><code>-i eth0</code> 只监听eth0网卡流量</li>
<li><code>-D</code> 显示可用的接口列表</li>
<li><code>-n</code> 不解析主机名、直接使用ip</li>
<li><code>-nn</code> 显示端口</li>
<li><code>-q</code> 显示简化输出</li>
<li><code>-t</code> 显示可读的时间戳</li>
<li><code>-X</code> 以<code>hex</code>和<code>ASCII</code>两种形式显示包内容</li>
<li><code>-v</code> <code>-vv</code> <code>-vvv</code> 显示更加多的包信息</li>
<li><code>-XX</code> 与 <code>-X</code> 类似、增加以太网header的显示</li>
<li><code>-c</code> 只读取<code>x</code>个包, 然后停止</li>
<li><code>-s</code> 指定每个包捕获的长度、单位是 <code>byte</code>, 可以使用 <code>-s0</code> 捕获整个包</li>
<li><code>-S</code> 输出绝对的序列号</li>
<li><code>-e</code> 获取以太网 <code>header</code></li>
<li><code>-w</code> 将捕获的数据包信息写入文件</li>
<li><code>-r</code> 加载之前保存的文件</li>
</ul>
<p><strong>表达式</strong><br>在<code>tcpdump</code>中可以使用表达式过滤指定类型的流量：</p>
<ul>
<li>类型type选项包含：<code>host</code>  <code>net</code> <code>port</code></li>
<li>方向dir包含：<code>src</code>  <code>dst</code></li>
<li>协议proto选项包含：<code>tcp</code> <code>udp</code> <code>ah</code>等</li>
</ul>
<p><strong>示例</strong></p>
<blockquote>
<p>捕获所有流量<br>tcpdump -i any</p>
</blockquote>
<blockquote>
<p>指定网卡接口、查看指定网卡发生了什么<br>tcpdump -i eth0</p>
</blockquote>
<blockquote>
<p>原生输出、不解析主机、端口、显示绝对序列号、可读的时间戳<br>tcpdump -ttttnnvvS</p>
</blockquote>
<blockquote>
<p>查看指定ip的流量<br>tcpdump host {ip}</p>
</blockquote>
<blockquote>
<p>使用<code>源</code>和<code>目的</code>过滤<br>tcpdump src {source ip}<br>tcpdump dst {dest ip}</p>
</blockquote>
<blockquote>
<p>过滤某个子网的数据包<br>tcpdump net 1.2.3.0&#x2F;24</p>
</blockquote>
<blockquote>
<p>过滤指定端口相关的流量<br>tcpdump port {port}<br>tcpdump src port {port} -&gt; 只显示发出</p>
</blockquote>
<blockquote>
<p>过滤指定协议的流量<br>tcpdump tcp</p>
</blockquote>
<blockquote>
<p>只显示ipv6流量<br>tcpdump ip6</p>
</blockquote>
<blockquote>
<p>基于包大小过滤流量<br>tcpdump less 32<br>tcpdump grater 64<br>tcpdump &lt;&#x3D;128</p>
</blockquote>
<blockquote>
<p>使用端口范围过滤<br>tcpdump portrange 21-23</p>
</blockquote>
<blockquote>
<p>保存到指定文件<br>tcpdump port 80 -w file</p>
</blockquote>
<blockquote>
<p>加载之前保存的文件<br>tcpdump -r file</p>
</blockquote>
<p><strong>高级使用</strong></p>
<ul>
<li><code>AND</code>: <code>and</code> or <code>&amp;&amp;</code></li>
<li><code>OR</code>: <code>or</code> or <code>||</code></li>
<li><code>except</code>: <code>not</code> or <code>!</code><blockquote>
<p>过滤指定源和目的端口<br>tcpdump -n src 1.1.1.2 and dst port 8080</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>过滤指定网络方向<br>tcpdump -n src net 1.1.1.2&#x2F;16 and dst net 1.1.1.3&#x2F;16</p>
</blockquote>
<blockquote>
<p>过滤到指定ip的非icmp报文<br>tcpdump dst 1.1.1.2 and src net and not icmp</p>
</blockquote>
<blockquote>
<p>构建规则过于复杂的时候、可以使用单引号将规则放到一起<br>tcpdump ‘src 1.1.1.1 and (dst port 80 or 22)’</p>
</blockquote>
<p><strong>隔离指定的TCP标识</strong><br><code>tcp[13]</code>表示在tcp header中的偏移位置13开始、后边代表的是匹配的字节数</p>
<blockquote>
<p>显示所有的urgent包(URG)<br>tcpdump ‘tcp[13] &amp; 32!&#x3D;0’</p>
</blockquote>
<blockquote>
<p>显示所有的ACK包<br>tcpdump ‘tcp[13] &amp; 16!&#x3D;0’</p>
</blockquote>
<blockquote>
<p>显示所有的push包<br>tcpdump ‘tcp[13] &amp; 8!&#x3D;0’</p>
</blockquote>
<blockquote>
<p>显示所有的reset包<br>tcpdump ‘[tcp13] &amp; 4!&#x3D;0’</p>
</blockquote>
<blockquote>
<p>显示所有的SYN包<br>tcpdump ‘[tcp13] &amp; 2!&#x3D;0’</p>
</blockquote>
<blockquote>
<p>显示所有的FIN包<br>tcpdump ‘[tcp13] &amp; 1!&#x3D;0’</p>
</blockquote>
<blockquote>
<p>显示所有的SYN&#x2F;ACK包<br>tcpdump ‘tcp[13]&#x3D;18’</p>
</blockquote>
<p><strong>识别重要流量</strong></p>
<blockquote>
<p>过滤同时设置SYN和RST标识的包（这在正常情况下不应该发生）<br>tcpdump ‘tcp[13] &#x3D; 6’</p>
</blockquote>
<blockquote>
<p>过滤明文的HTTP GET请求<br>tcpdump ‘tcp[32:4] &#x3D; 0x47455420’</p>
</blockquote>
<blockquote>
<p>通过横幅文本过滤任意端口的SSH连接<br>tcpdump ‘tcp[(tcp[12]&gt;&gt;2):4] &#x3D; 0x5353482D’</p>
</blockquote>
<blockquote>
<p>过滤TTL小于10的包（通常情况下是存在问题或者在使用traceroute）<br>tcpdump ‘ip[8] &lt; 10’</p>
</blockquote>
<blockquote>
<p>过滤恶意的包<br>tcpdump ‘ip[6] &amp; 128 !&#x3D; 0’</p>
</blockquote>
<p><strong>理解报文内容</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">08</span>:<span class="number">41</span>:<span class="number">13</span>.<span class="number">729687</span> IP <span class="number">192.168.64.28</span>.<span class="number">22</span> &gt; <span class="number">192.168.64.1</span>.<span class="number">41916</span>: Flags<span class="meta"> [P.], seq 196:568, ack 1, win 309, options [nop,nop,TS val 117964079 ecr 816509256], length 372</span></span><br></pre></td></tr></table></figure>
<p><code>08:41:13.729687</code> 本地时间戳<br><code>ip</code> 协议是ipv4、若是ipv6会显示为 ip6<br><code>192.168.64.28.22</code> 源ip和端口<br><code>192.168.64.1.41916</code> 目的ip和端口<br><code>Flags [P.]</code> 报文标记段<br><code>seq 196:568</code> 代表该数据包包含该数据流的第 196 到 568 字节<br><code>ack 1</code> 该数据包是数据发送方，ack 值为 1。在数据接收方，该字段代表数据流上的下一个预期字节数据，例如，该数据流中下一个数据包的 ack 值应该是 568<br><code>win 309</code> 表示接收缓冲区中可用的字节数，后跟 TCP 选项如 MSS（最大段大小）或者窗口比例值<br><code>length 372</code> 代表数据包有效载荷字节长度</p>
<blockquote>
<p>flag描述<br>S SYN Connection Start<br>F FIN Connection Finish<br>P PUSH Data Push<br>. ACK Acknowledment</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/linux%E4%BD%BF%E7%94%A8_%E5%A6%82%E4%BD%95%E4%BA%86%E8%A7%A3%E8%87%AA%E5%B7%B1%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="niuniu">
      <meta itemprop="description" content="多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="牛牛的小窝">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/linux%E4%BD%BF%E7%94%A8_%E5%A6%82%E4%BD%95%E4%BA%86%E8%A7%A3%E8%87%AA%E5%B7%B1%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81/" class="post-title-link" itemprop="url">如何了解自己的系统运行状态</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-20T00:00:00+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-07 11:31:06" itemprop="dateModified" datetime="2022-05-07T11:31:06+08:00">2022-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E4%BD%BF%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">Linux使用</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="平均负载-loadavg"><a href="#平均负载-loadavg" class="headerlink" title="平均负载 loadavg"></a>平均负载 loadavg</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当系统变慢时、我们想到的很可能是 <span class="built_in">uptime</span> 或者 top</span><br><span class="line">它每一列的含义是什么 ？</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/14027542-7a4f7de3de8dc6be.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="uptime"></p>
<p>so. mark<br><code>10:13:59</code> 是当前时间<br><code>up 303 days, 22:27</code> 是系统允许时间<br> <code>1 user</code> 是正在登录用户数<br>load average: 4.61, 4.37, 3.73 这三列呢 ？<br>依次是 过去<code>1min</code>、<code>5min</code>、<code>15min</code>的平均负载</p>
<h4 id="什么是平均负载-？？？"><a href="#什么是平均负载-？？？" class="headerlink" title="什么是平均负载 ？？？"></a>什么是平均负载 ？？？</h4><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">知道了uptime是如何看的、那么平均负载多少算是合适 ？它又是代表什么含义呢 ？</span><br><span class="line"></span><br><span class="line">简单来说平均负载就是单位时间内、系统处于可运行状态和不可中断状态的平均进程数、也就是平均活跃进程数，</span><br><span class="line">之前、我以为是<span class="meta">cpu</span>的使用率来着的~~~xxxxx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">可运行状态的进程：指正在使用<span class="meta">CPU</span>或者等待<span class="meta">CPU</span>的进程、ps看到的、处于R状态(Runnable/Running)的进程</span><br><span class="line"></span><br><span class="line">不可中断进程：正处于内核关键流程中的进程、并且这些进程是不可打断的、eg. 等待硬件设备的io响应、也就是ps命令中的D状态(uninterrutible sleep)的进程</span><br><span class="line">不可中断状态其实是系统对进程包含和硬件设备的一种保护机制</span><br><span class="line"></span><br><span class="line">既然平均负载就是平均的活跃进程数、那么最理想的状态就是每个<span class="meta">CPU</span>上都刚好运行着一个进程(每个<span class="meta">cpu</span>充分利用、又不会过载)</span><br><span class="line"></span><br><span class="line">eg. loadavg为<span class="number">2</span>、意味着什么呢 ？</span><br><span class="line"><span class="number">1</span>) 假如系统有<span class="number">2</span>个<span class="meta">CPU</span>、则<span class="meta">cpu</span>刚好都被占用</span><br><span class="line"><span class="number">2</span>) 在<span class="number">4</span>个<span class="meta">CPU</span>的系统上、意味着<span class="number">50</span>%的<span class="meta">CPU</span>空闲</span><br><span class="line"><span class="number">3</span>) 在只有<span class="number">1</span>个<span class="meta">CPU</span>的系统上、则会有一半的进程竞争不到<span class="meta">CPU</span></span><br><span class="line"></span><br><span class="line">最理想的状态是、刚好等于<span class="meta">CPU</span>的核心数</span><br><span class="line">那么如何查询系统有几个<span class="meta">CPU</span> ？？</span><br><span class="line"><span class="number">1</span>) 使用top</span><br><span class="line"><span class="number">2</span>) 从/proc/cpuinfo 获取 </span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/14027542-4cf1dcfb4a79d551.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cpuinfo.png"></p>
<h4 id="知道了cpu的核数和衡量指标、如何分析负载趋势？"><a href="#知道了cpu的核数和衡量指标、如何分析负载趋势？" class="headerlink" title="知道了cpu的核数和衡量指标、如何分析负载趋势？"></a>知道了cpu的核数和衡量指标、如何分析负载趋势？</h4><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 若<span class="number">1</span><span class="keyword">min</span>、<span class="number">5</span><span class="keyword">min</span>、<span class="number">15</span><span class="keyword">min</span>的值基本相同或者相差不大、说明系统负载很平稳</span><br><span class="line"><span class="number">2.</span> 若<span class="number">1</span><span class="keyword">min</span>内的值远小于<span class="number">15</span><span class="keyword">min</span>的值、说明最近<span class="number">1</span><span class="keyword">min</span>的负载在减小、而过去<span class="number">15</span><span class="keyword">min</span>则负载很高</span><br><span class="line"><span class="number">3.</span> 反过来、若最近<span class="number">1</span>imn的值远高于过去<span class="number">15</span><span class="keyword">min</span>的负载、说明负载在明显升高、需要持续观察一下</span><br><span class="line"></span><br><span class="line">eg. 单核cpu的 loadavg为：<span class="number">1.73</span>  <span class="number">0.60</span>  <span class="number">7.98</span> </span><br><span class="line">说明过去<span class="number">1</span><span class="keyword">min</span>有<span class="number">73</span>%的超载、过去<span class="number">15</span><span class="keyword">min</span>有<span class="number">698</span>%的超载</span><br><span class="line">总体来看、负载在降低</span><br><span class="line"></span><br><span class="line">那么实际生产环境、负载达到多少的时候、我们应该开始关注呢 ？ 一般 超过<span class="number">70</span>%就要持续观察下、看看系统负载的平均趋势</span><br></pre></td></tr></table></figure>

<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 命令</span><br><span class="line">stress 压力测试工具</span><br><span class="line">mpstat 多核CPU性能分析工具、可实时查看每个CPU的平均指标</span><br><span class="line">pidstat 实时查看进程的cpu、内存、io及上下文切换等指标</span><br><span class="line">watch 监控进程</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 模拟cpu密集型(需要准备<span class="number">3</span>个终端、每个终端执行一个命令)</span><br><span class="line">stress <span class="attr">--cpu</span> <span class="number">1</span> <span class="attr">--timeout</span> <span class="number">600</span></span><br><span class="line"></span><br><span class="line">watch -d uptime (-d代表高亮显示变化的区域)</span><br><span class="line"></span><br><span class="line">mpstat -<span class="selector-tag">P</span> <span class="attribute">ALL</span> <span class="number">5</span> (-<span class="selector-tag">p</span> <span class="attribute">ALL</span>代表监控所有CPU <span class="number">5</span>代表间隔<span class="number">5s</span>输出<span class="number">1</span>次)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 模拟IO密集型</span><br><span class="line">stress -<span class="selector-tag">i</span> <span class="number">1</span> <span class="attr">--timeout</span> <span class="number">600</span></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>. 大量进程的场景</span><br><span class="line">stress -c <span class="number">8</span> <span class="attr">--timeout</span> <span class="number">600</span></span><br><span class="line"></span><br><span class="line">附：安装stress</span><br><span class="line">sudo yum -y install epel-release</span><br><span class="line">sudo yum -y install stress</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/14027542-e8ae343bc07ff1ca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="stress.png"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/14027542-e6c92ece83479acc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="uptime.png"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/14027542-5b6eb08f6768da70.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="mpstat.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">niuniu</p>
  <div class="site-description" itemprop="description">多数是学习笔记、偶尔发发感慨、给生活添加些许乐趣</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">162</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">niuniu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
